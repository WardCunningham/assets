{"title":"Handlers","story":[{"type":"paragraph","id":"220a0441426aa03a","text":"We will examine each of the web request handlers that we included in the small implementation of federated wiki. Follow along in the source code. [https://github.com/WardCunningham/small-again-wiki/blob/ffe3c3ca2147b34da70ca401bc6b5456e0999ed5/server.rb#L44-L60 github]"},{"type":"paragraph","id":"b249380872d79e52","text":"See [[Helpers]] for definitions used in handlers."},{"type":"paragraph","id":"bb7d329c1fe35e28","text":"get '/' redirects to welcome-visitors, the only page name deeply wired into federated wiki the same way 'main' is wired into C and Java."},{"type":"paragraph","id":"48f4ac5d82576fa6","text":"get '/*.json' serves the wiki page who's title has been squeezed into a hyphenated, lowercase, punctuation free version called a 'slug'."},{"type":"paragraph","id":"3f01ed449e5b0e7e","text":"Slugs are filename and url safe and confer case-insensitivity on page titles."},{"type":"paragraph","id":"61f9bd1d47d7435c","text":"Sinatra will send 404-not-found for missing content which will clue the browser-based version to keep looking elsewhere."},{"type":"paragraph","id":"6e8d112face2e989","text":"get '/*.html' serves the wiki page fetched as json and translated to html. A helper does just enough to allow navigation through the server's hypertext."},{"type":"paragraph","id":"dbc3872343833029","text":"Federation expects us to try harder to find a page which might still be stored on a remote server."},{"type":"paragraph","id":"1ee824d1f59f17c6","text":"We could proxy to sites mentioned in the page's journal and handle 404s until it is found. But the server handling this request might already be on the wrong side of a firewall to reach the intended content."},{"type":"paragraph","id":"7ca1f5bff1fc59c5","text":"get '/view/*' handles a url format preferred by the browser-based implementation. There 'view' means we expect the page from this server. The segment would be replaced with a remote server's domain name if this were not true."}],"journal":[{"type":"create","item":{"title":"Handlers","story":[]},"date":1460315192368},{"item":{"type":"factory","id":"220a0441426aa03a"},"id":"220a0441426aa03a","type":"add","date":1460315214416},{"type":"edit","id":"220a0441426aa03a","item":{"type":"paragraph","id":"220a0441426aa03a","text":"We will examine each of the web request handlers that we included in the small implementation of federated wiki."},"date":1460315325411},{"type":"edit","id":"220a0441426aa03a","item":{"type":"paragraph","id":"220a0441426aa03a","text":"We will examine each of the web request handlers that we included in the small implementation of federated wiki. Follow along starting in the bottom portion of the source code. [https://github.com/WardCunningham/small-again-wiki/blob/ffe3c3ca2147b34da70ca401bc6b5456e0999ed5/server.rb#L44-L60 github]"},"date":1460315511076},{"type":"edit","id":"220a0441426aa03a","item":{"type":"paragraph","id":"220a0441426aa03a","text":"We will examine each of the web request handlers that we included in the small implementation of federated wiki. Follow along in the source code. [https://github.com/WardCunningham/small-again-wiki/blob/ffe3c3ca2147b34da70ca401bc6b5456e0999ed5/server.rb#L44-L60 github]"},"date":1460315552417},{"type":"add","id":"b249380872d79e52","item":{"type":"paragraph","id":"b249380872d79e52","text":"See [[Helpers]] for definitions used in handlers."},"after":"220a0441426aa03a","date":1460315623287},{"type":"add","id":"bb7d329c1fe35e28","item":{"type":"paragraph","id":"bb7d329c1fe35e28","text":"# JSON"},"after":"b249380872d79e52","date":1460315652210},{"type":"edit","id":"bb7d329c1fe35e28","item":{"type":"paragraph","id":"bb7d329c1fe35e28","text":"get '/' redirects to welcome-visitors, the only page name deeply wired into federated wiki the same way 'main' is wired into C and Java."},"date":1460315841100},{"type":"add","id":"48f4ac5d82576fa6","item":{"type":"paragraph","id":"48f4ac5d82576fa6","text":"get '/*.json' serves the wiki page who's title has been squeezed into a hyphenated, lowercase, punctuation free version called a 'slug'. Slugs are filename and url safe and confer case-insensitivity on page titles."},"after":"bb7d329c1fe35e28","date":1460316142927},{"type":"add","id":"61f9bd1d47d7435c","item":{"type":"paragraph","id":"61f9bd1d47d7435c","text":"Sinatra will send 404-not-found for missing content which will clue the browser-based version to keep looking elsewhere."},"after":"48f4ac5d82576fa6","date":1460316478806},{"type":"edit","id":"48f4ac5d82576fa6","item":{"type":"paragraph","id":"48f4ac5d82576fa6","text":"get '/*.json' serves the wiki page who's title has been squeezed into a hyphenated, lowercase, punctuation free version called a 'slug'. These are filename and url safe and confer case-insensitivity on page titles."},"date":1460316545578},{"type":"edit","id":"48f4ac5d82576fa6","item":{"type":"paragraph","id":"48f4ac5d82576fa6","text":"get '/*.json' serves the wiki page who's title has been squeezed into a hyphenated, lowercase, punctuation free version called a 'slug'."},"date":1460316572334},{"type":"add","id":"3f01ed449e5b0e7e","item":{"type":"paragraph","id":"3f01ed449e5b0e7e","text":"Slugs are filename and url safe and confer case-insensitivity on page titles."},"after":"48f4ac5d82576fa6","date":1460316575430},{"type":"add","id":"6e8d112face2e989","item":{"type":"paragraph","id":"6e8d112face2e989","text":"get '/*.html' serves the wiki page fetched as json and translated to html. A helper does just enough to allow navigation through the server's hypertext."},"after":"61f9bd1d47d7435c","date":1460316809602},{"type":"add","id":"dbc3872343833029","item":{"type":"paragraph","id":"dbc3872343833029","text":"Federation expects us to try harder to find a page which might still be stored on a remote server."},"after":"6e8d112face2e989","date":1460317070861},{"type":"add","id":"1ee824d1f59f17c6","item":{"type":"paragraph","id":"1ee824d1f59f17c6","text":"We could proxy to sites mentioned in the page's journal and handle 404s until it is found. But the server handling this request might already be on the wrong side of a firewall to reach the intended content."},"after":"dbc3872343833029","date":1460317235177},{"type":"add","id":"7ca1f5bff1fc59c5","item":{"type":"paragraph","id":"7ca1f5bff1fc59c5","text":"get '/view/*' "},"after":"1ee824d1f59f17c6","date":1460317304095},{"type":"edit","id":"7ca1f5bff1fc59c5","item":{"type":"paragraph","id":"7ca1f5bff1fc59c5","text":"get '/view/*' handles a url format preferred by the browser-based implementation. There 'view' means we expect the page from this server. The segment would be replaced with a remote server's domain name if this were not true."},"date":1460317623916}]}